{% extends "layouts/base.html" %}
{% load static %}

{% block title %}Inventario{% endblock title %}

{% block content %}

  <div class="pc-container">
    <div class="pc-content">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="row align-items-center">
            <div class="col-md-12">
              <div class="page-header-title">
                <h5 class="mb-0">Home</h5>
              </div>
            </div>
            <div class="col-md-12">
              <ul class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{% url "index" %}">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript: void(0)">Clientes</a></li>
                <!-- <li class="breadcrumb-item" aria-current="page">Home</li> -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    <!------[tablas clientes]-->
    <!-- Botón para abrir el modal -->
<div class="container py-4">

  <!-- Encabezado -->
  <div class="row align-items-center mb-4">
    <div class="col-md-6 col-12 mb-2 mb-md-0">
      <h2 class="text-center text-md-start">clientes</h2>
    </div>
    <div class="col-md-6 col-12 text-center text-md-end">
        <a href="{% url 'register_clientes' %}" class="btn btn-success"> Nuevo cliente</a>
        <i class="bi bi-plus-circle me-1"></i>
      </a>
    </div>
  </div>

  <!-- Tabla -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle shadow-sm">
      <thead class="table-primary text-center">
        <tr>
          <th>#</th>
          <th>nombre</th>
          <th>apellido</th>
          <th>nit_ci</th>
          <th>direccion</th>
          <th>telefono</th>
        </tr>
      </thead>
      <tbody class="text-center">
        {% for cliente in clientes %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td class="text-wrap">{{ cliente.nombre }}</td>
          <td class="text-wrap">{{ cliente.apellido }}</td>
            <td class="text-wrap">{{ cliente.nit_ci }}</td>
            <td class="text-wrap">{{ cliente.direccion }}</td>
            <td class="text-wrap">{{ cliente.telefono }}</td>
          <td>
            <div class="d-flex justify-content-center flex-wrap gap-1">
              <!-- Editar -->
               <!--   -->
              <a  href="{% url 'editar_cliente' cliente.id %}" class="btn btn-sm btn-outline-primary d-flex align-items-center gap-1">
                <i class="bi bi-pencil-square"></i><span class="d-none d-sm-inline">Editar</span>
              </a>

              <!-- Eliminar -->
               <!--  -->
              <a  href="{% url 'eliminar_cliente' cliente.id %}" class="btn btn-sm btn-outline-danger d-flex align-items-center gap-1"
                 onclick="return confirm('¿Estás seguro de que deseas eliminar este cliente?');">
                <i class="bi bi-trash"></i><span class="d-none d-sm-inline">Eliminar</span>
              </a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-muted text-center">No hay clientes registrados.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>



<!--modal-->
<!-- Modal -->
<div class="modal fade" id="registroModal" tabindex="-1" aria-labelledby="registroModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <!-- Encabezado -->
      <div class="modal-header">
        <h5 class="modal-title" id="registroModalLabel">Registrar cliente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      
      <!-- Cuerpo con formulario -->
      <div class="modal-body">
        <form id="formulariocliente">
          <div class="mb-3">
            <label for="nombrecliente" class="form-label">Nombre del cliente</label>
            <input type="text" class="form-control" id="nombrecliente" required>
          </div>
          <div class="mb-3">
            <label for="categoriacliente" class="form-label">Categoría</label>
            <input type="text" class="form-control" id="categoriacliente" required>
          </div>
          <div class="mb-3">
            <label for="preciocliente" class="form-label">Precio</label>
            <input type="number" class="form-control" id="preciocliente" required>
          </div>
          <div class="mb-3">
            <label for="stockcliente" class="form-label">Stock</label>
            <input type="number" class="form-control" id="stockcliente" required>
          </div>
        </form>
      </div>
      
      <!-- Pie con botones -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" form="formulariocliente" class="btn btn-primary">Guardar</button>
      </div>
      
    </div>
  </div>
</div>
          <!-- [ Main Content ] end -->
    </div>
  </div>

{% endblock content %}

{% block extra_js %}

<script src="{% static "assets/js/plugins/apexcharts.min.js" %}"></script>
<script src="{% static "assets/js/plugins/jsvectormap.min.js" %}"></script>
<script src="{% static "assets/js/plugins/world.js" %}"></script>
<script src="{% static "assets/js/pages/dashboard-default.js" %}"></script>

{% endblock extra_js %}

